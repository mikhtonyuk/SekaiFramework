<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Sekai Framework: stack_allocator&lt; T, stack_capacity &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>stack_allocator&lt; T, stack_capacity &gt; Class Template Reference<br/>
<small>
[<a class="el" href="group___common.html">Common</a>]</small>
</h1><!-- doxytag: class="stack_allocator" -->
<p>Stack based allocator.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="stack__container_8h_source.html">stack_container.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for stack_allocator&lt; T, stack_capacity &gt;:</div>
<div class="dynsection">
<div class="center"><img src="classstack__allocator__coll__graph.png" border="0" usemap="#stack__allocator_3_01_t_00_01stack__capacity_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="stack__allocator_3_01_t_00_01stack__capacity_01_4_coll__map" id="stack__allocator_3_01_t_00_01stack__capacity_01_4_coll__map">
<area shape="rect" id="node2" href="structstack__allocator_1_1_source.html" title="{stack_allocator\&lt; T, stack_capacity \&gt;::Source\n|+ m_stackBuffer\l+ m_isStackBufferUsed\l|+ Source()\l+ stack_buffer()\l+ stack_buffer()\l}" alt="" coords="5,6,291,135"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classstack__allocator-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structstack__allocator_1_1rebind.html">rebind</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structstack__allocator_1_1_source.html">Source</a></td></tr>
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::allocator&lt; T &gt;<br class="typebreak"/>
::<a class="el" href="classstack__allocator.html#a85d0ddb34eb7f726cdfa65c0018e5f6a">pointer</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#a85d0ddb34eb7f726cdfa65c0018e5f6a">pointer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::allocator&lt; T &gt;<br class="typebreak"/>
::<a class="el" href="classstack__allocator.html#a2b2ceaf514218423eb941f9cf15fcc3a">size_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#a2b2ceaf514218423eb941f9cf15fcc3a">size_type</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#af18a12cbb30484d03403ef3cf2a09e68">stack_allocator</a> (const <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt; &amp;rhs)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class U , size_t other_capacity&gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#abb75a859f724254351c02392234be868">stack_allocator</a> (const <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; U, other_capacity &gt; &amp;other)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#a22399a4425907a79f28d6da451940c5c">stack_allocator</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#a2876dc878bc9958ff161ae13d5bf7318">stack_allocator</a> (<a class="el" href="structstack__allocator_1_1_source.html">Source</a> *source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstack__allocator.html#a85d0ddb34eb7f726cdfa65c0018e5f6a">pointer</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#acc54fbef64e95a2bd0df0e6f340bb5ec">allocate</a> (<a class="el" href="classstack__allocator.html#a2b2ceaf514218423eb941f9cf15fcc3a">size_type</a> n, void *hint=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#a8c207b3f9631e9cadd6be0402c663b32">deallocate</a> (<a class="el" href="classstack__allocator.html#a85d0ddb34eb7f726cdfa65c0018e5f6a">pointer</a> p, <a class="el" href="classstack__allocator.html#a2b2ceaf514218423eb941f9cf15fcc3a">size_type</a> n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstack__allocator.html#aa3bc5e042aebbdff71c43229e29ff8c8">isOnStack</a> () const </td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T, size_t stack_capacity&gt;<br/>
 class stack_allocator&lt; T, stack_capacity &gt;</h3>

<p>Stack based allocator. </p>
<p>This allocator can be used with STL containers to provide a stack buffer from which to allocate memory and overflows onto the heap. This stack buffer would be allocated on the stack and allows us to avoid heap operations in some situations.</p>
<p>STL likes to make copies of allocators, so the allocator itself can't hold the data. Instead, we make the creator responsible for creating a StackAllocator::Source which contains the data. Copying the allocator merely copies the pointer to this shared source, so all allocators created based on our allocator will share the same stack buffer.</p>
<p>This stack buffer implementation is very simple. The first allocation that fits in the stack buffer will use the stack buffer. Any subsequent allocations will not use the stack buffer, even if there is unused room. This makes it appropriate for array-like containers, but the caller should be sure to reserve() in the container up to the stack buffer size. Otherwise the container will allocate a small array which will "use up" the stack buffer.</p>
<p>Based on <a href="http://src.chromium.org/svn/trunk/src/base/stack_container.h">http://src.chromium.org/svn/trunk/src/base/stack_container.h</a> from Chromium project </p>

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00041">41</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a85d0ddb34eb7f726cdfa65c0018e5f6a"></a><!-- doxytag: member="stack_allocator::pointer" ref="a85d0ddb34eb7f726cdfa65c0018e5f6a" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef std::allocator&lt;T&gt;::<a class="el" href="classstack__allocator.html#a85d0ddb34eb7f726cdfa65c0018e5f6a">pointer</a> <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::<a class="el" href="classstack__allocator.html#a85d0ddb34eb7f726cdfa65c0018e5f6a">pointer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00044">44</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2b2ceaf514218423eb941f9cf15fcc3a"></a><!-- doxytag: member="stack_allocator::size_type" ref="a2b2ceaf514218423eb941f9cf15fcc3a" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef std::allocator&lt;T&gt;::<a class="el" href="classstack__allocator.html#a2b2ceaf514218423eb941f9cf15fcc3a">size_type</a> <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::<a class="el" href="classstack__allocator.html#a2b2ceaf514218423eb941f9cf15fcc3a">size_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00045">45</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af18a12cbb30484d03403ef3cf2a09e68"></a><!-- doxytag: member="stack_allocator::stack_allocator" ref="af18a12cbb30484d03403ef3cf2a09e68" args="(const stack_allocator&lt; T, stack_capacity &gt; &amp;rhs)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::<a class="el" href="classstack__allocator.html">stack_allocator</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>rhs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00094">94</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb75a859f724254351c02392234be868"></a><!-- doxytag: member="stack_allocator::stack_allocator" ref="abb75a859f724254351c02392234be868" args="(const stack_allocator&lt; U, other_capacity &gt; &amp;other)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
<div class="memtemplate">
template&lt;class U , size_t other_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::<a class="el" href="classstack__allocator.html">stack_allocator</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; U, other_capacity &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>other</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00108">108</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<a class="anchor" id="a22399a4425907a79f28d6da451940c5c"></a><!-- doxytag: member="stack_allocator::stack_allocator" ref="a22399a4425907a79f28d6da451940c5c" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::<a class="el" href="classstack__allocator.html">stack_allocator</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00113">113</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2876dc878bc9958ff161ae13d5bf7318"></a><!-- doxytag: member="stack_allocator::stack_allocator" ref="a2876dc878bc9958ff161ae13d5bf7318" args="(Source *source)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::<a class="el" href="classstack__allocator.html">stack_allocator</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstack__allocator_1_1_source.html">Source</a> *&nbsp;</td>
          <td class="paramname"> <em>source</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00118">118</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="acc54fbef64e95a2bd0df0e6f340bb5ec"></a><!-- doxytag: member="stack_allocator::allocate" ref="acc54fbef64e95a2bd0df0e6f340bb5ec" args="(size_type n, void *hint=0)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstack__allocator.html#a85d0ddb34eb7f726cdfa65c0018e5f6a">pointer</a> <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstack__allocator.html#a2b2ceaf514218423eb941f9cf15fcc3a">size_type</a>&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>hint</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00124">124</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8c207b3f9631e9cadd6be0402c663b32"></a><!-- doxytag: member="stack_allocator::deallocate" ref="a8c207b3f9631e9cadd6be0402c663b32" args="(pointer p, size_type n)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::deallocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstack__allocator.html#a85d0ddb34eb7f726cdfa65c0018e5f6a">pointer</a>&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classstack__allocator.html#a2b2ceaf514218423eb941f9cf15fcc3a">size_type</a>&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00139">139</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa3bc5e042aebbdff71c43229e29ff8c8"></a><!-- doxytag: member="stack_allocator::isOnStack" ref="aa3bc5e042aebbdff71c43229e29ff8c8" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, size_t stack_capacity&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classstack__allocator.html">stack_allocator</a>&lt; T, stack_capacity &gt;::isOnStack </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stack__container_8h_source.html#l00148">148</a> of file <a class="el" href="stack__container_8h_source.html">stack_container.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>D:/Programming/Projects/depot/SekaiFramework/src/common/<a class="el" href="stack__container_8h_source.html">stack_container.h</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Apr 28 21:26:21 2010 for Sekai Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
